## Описание строк директив файла для тестирования состояния обьектов приложений Visualization и Tester

### [Секция для описания общих директив]
#### I. Заснуть на время
  1\
waiting_time

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
1 |'waiting_time'     | Type[int]  |обязательный   | время в секундах на которое программа засыпает|20|


### [Секция для описания директив для Visualization]
#### I. Получить состояние


vis:[TCP_id=]/station_id/station_sub_id/object_type_name/object_name/object_state[?elapsed_time]

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
|1 |'vis'              | Type[str]  |обязательный   | маркер, строка для Visualisation                                                                         | vis
|2 |':'                | Type[str]  |обязательный   | разделитель между типом приложения и остальными параметрами                                              | :
|3 |'TCP_id'=          | Type[str]  |необязательный | имя TCP клиента куда буддет отправлен запрос из данной строки                                            | ШНД=
|4 |'/'                | Type[str]  |обязательный   | разделитель параметров                                                                                   | /
|5 |'station_id'       | Type[int]  |обязательный   | код станции                                                                                              | 7600056
|6 |'station_sub_id'   | Type[int]  |обязательный   | код графической модели станции                                                                           | 2
|7 |'object_type_name' | Type[str]  |обязательный   | имя типа обьекта состояние которого получаем                                                             | вход
|8 |'object_name'      | Type[str]  |обязательный   | имя обьекта состояние которого получаем                                                                  | Н
|9 |'object_state'     | Type[str]  |обязательный   | имя состояния которое хотим получить в ответе                                                            | Н
|10|'?'                | Type[str]  |необязательный | активация режима 'попытка ожидания желаемого состояния object_state в течении времени 'elapsed_time'     | [,?, ?24]
|11|'elapsed_time'     | Type[int]  |необязательный | время на которое включается режим 'попытка ожидания желаемого состояния в течении времени 'elapsed_time' |

По умолчанию:
1. Если не указан 'TCP_id' запрос будет отправлен TCP клиенту по умолчанию(определен в файле конфигурации)
2. Если не указан 'elapsed_time' активация режима будет в течении 60 секунд

из полученной директивы получаем сообщение для отправки клиенту 'TCP_id'

GET:station_id:station_sub_id:object_type_id:object_name

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
1 |'GET'              | Type[str]  |обязательный   | маркер, запрос на получение состояния                                                                    | GET
2 |'station_id'       | Type[int]  |обязательный   | код станции                                                                                              | 7600056
3 |'station_sub_id'   | Type[int]  |обязательный   | код графической модели станции                                                                           | 2
4 |'object_type_id'   | Type[int]  |обязательный   | код типа обьекта состояние которого получаем(берется из файла настроек)                                  | 3
5 |'object_name'      | Type[str]  |обязательный   | имя обьекта состояние которого получаем                                                                  | Н

Типы ответа на запрос типа GET:\

1.

ERR_FORMAT

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
|1 | 'ERR_FORMAT'   | Type[str]  |обязательный   | неправильный запрос(/нет такого кода типа). | ERR_FORMAT |


2.

station_id:station_sub_id:object_type_id:object_name:NO

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
|1 |'station_id'       | Type[int]  |обязательный   | код станции                                                                                              | 7600056
|2 |'station_sub_id'   | Type[int]  |обязательный   | код графической модели станции                                                                           | 2
|3 |'object_type_id'   | Type[int]  |обязательный   | код типа обьекта состояние которого получаем(берется из файла настроек)                                  | 3
|4 |'object_name'      | Type[str]  |обязательный   | имя обьекта состояние которого получаем                                                                  | Н
|5 |'NO'               | Type[str]  |обязательный   | неправильный запрос(/нет такого имя обьекта)                                                             | NO

3.

station_id:station_sub_id:object_type_id:object_name:[layer_id, color_active_phase_id, [color_pasive_phase_id]:]

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
|1 |'station_id'            | Type[int]  |обязательный   | код станции                                                                                          | 7600056
|2 |'station_sub_id'        | Type[int]  |обязательный   | код графической модели станции                                                                       | 2
|3 |'object_type_id'        | Type[int]  |обязательный   | код типа обьекта состояние которого получаем(берется из файла настроек)                              | 3
|4 |'object_name'           | Type[str]  |обязательный   | имя обьекта состояние которого получаем                                                              | Н
|5 |'layer_id'              | Type[int]  |обязательный   | код слоя                                                                                             | 1
|6 |'color_active_phase_id' | Type[int]  |обязательный   | цвет активной фазы мигания/цвет примитива этого слоя                                                 | 22
|7 |'color_pasive_phase_id' | Type[int]  |необязательный | цвет пассивной фазы мигания/отсутствует если нет мигания                                             | 256


#### II. Отправить команду

vis:[TCP_id=]/station_id/object_type_name/object_name/command_name[:command_type]

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
|1 |'vis'              | Type[str]  |обязательный   | маркер, строка для Visualisation                                                                         | vis
|2 |'/'                | Type[str]  |обязательный   | разделитель параметров                                                                                   | /
|3 |':'                | Type[str]  |обязательный   | разделитель между типом приложения и остальными параметрами                                              | :
|4 |'TCP_id'=          | Type[str]  |необязательный | имя tcp клиента куда буддет отправлен запрос из данной строки                                            | ШНД=
|5 |'station_id'       | Type[int]  |обязательный   | код станции                                                                                              | 7600056
|6 |'object_type_name' | Type[str]  |обязательный   | имя типа обьекта команды                                                                                 | вход
|7 |'object_name'      | Type[str]  |обязательный   | имя обьекта команды                                                                                      | Н
|8 |'command_name'     | Type[str]  |обязательный   | имя команды                                                                                              | Н
|9 |:'command_type'    | Type[int]  |необязательный | тип команды: 0-обычная, 1-предварительная, 2-ответственная                                               | :0

из полученной директивы получаем сообщение для отправки клиенту 'TCP_id'


CMD:station_id:object_type_id:object_name:command_name:command_type

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
|1 |'CMD'              | Type[str]  |обязательный   | маркер, запрос на выполнение команды                                                                     | CMD
|2 |'station_id'       | Type[int]  |обязательный   | код станции                                                                                              | 7600056
|3 |'object_type_id'   | Type[int]  |обязательный   | код типа обьекта состояние которого получаем(берется из файла настроек)                                  | 3
|4 |'object_name'      | Type[str]  |обязательный   | имя обьекта состояние которого получаем                                                                  | Н
|5 |'command_name'     | Type[str]  |обязательный   | имя команды                                                                                              | Н
|6 |'command_type'     | Type[int]  |обязательный   | тип команды: 0-обычная, 1-предварительная, 2-ответственная                                               | 0

Типы ответа на запрос типа CMD:

1.

ERR_FORMAT

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
|1 | 'ERR_FORMAT'   | Type[str]  |обязательный   | неправильный запрос(/нет такого кода типа).| ERR_FORMAT|

2.


CMD:station_id:object_type_id:object_name:command_name:confirmation

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
|1 |'CMD'              | Type[str]  |обязательный   | маркер, запрос на выполнение команды                                                                     | CMD
|5 |'station_id'       | Type[int]  |обязательный   | код станции                                                                                              | 7600056
|6 |'object_type_name' | Type[str]  |обязательный   | имя типа обьекта команды                                                                                 | вход
|7 |'object_name'      | Type[str]  |обязательный   | имя обьекта команды                                                                                      | Н
|8 |'command_name'     | Type[str]  |обязательный   | имя команды                                                                                              | Н
|5 |'confirmation'     | Type[str]  |обязательный   | состояние отправки команды OK-отправлена, NO-неотправлена                                                | NO

### [Секция для описания директив для Tester]

#### I. Получить состояние


test:[TCP_id=]/table_id/impulse_name/impulse_state[?elapsed_time]

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
1 |'test'             | Type[str]  |обязательный   | маркер, строка для Tester                                                                                | test
2 |':'                | Type[str]  |обязательный   | разделитель между типом приложения и остальными параметрами                                              | :
3 |'TCP_id'=          | Type[str]  |необязательный | имя TCP клиента куда буддет отправлен запрос из данной строки                                            | ШНД=
4 |'/'                | Type[str]  |обязательный   | разделитель параметров                                                                                   | /
5 |'table_id'         | Type[int]  |обязательный   | код станции                                                                                              | 7600056
6 |'impulse_name'     | Type[str]  |обязательный   | имя импульса состояние которого получаем                                                                 | Н
7 |'impulse_state'    | Type[str]  |обязательный   | имя состояния которое хотим получить в ответе                                                            | активный
8 |'?'                | Type[str]  |необязательный | активация режима 'попытка ожидания желаемого состояния object_state в течении времени 'elapsed_time'     | [,?, ?24]
9 |'elapsed_time'     | Type[int]  |необязательный | время на которое включается режим 'попытка ожидания желаемого состояния в течении времени 'elapsed_time' |

По умолчанию:
1. Если не указан 'TCP_id' запрос будет отправлен TCP клиенту по умолчанию(определен в файле конфигурации)
2. Если не указан 'elapsed_time' активация режима будет в течении 60 секунд

из полученной директивы получаем сообщение для отправки клиенту 'TCP_id'


GET:table_id:impulse_name

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
1 |'GET'              | Type[str]  |обязательный   | маркер, запрос на получение состояния                                                                    | GET
2 |'table_id'         | Type[int]  |обязательный   | код таблицы                                                                                              | 7600056
3 |'impulse_name'     | Type[str]  |обязательный   | импульса состояние которого получаем                                                                     | Н

Типы ответа на запрос типа GET:
1.
    1          2       3
table_id:impulse_state:NO

1 |'table_id'         | Type[int]  |обязательный   | код станции                                                                                              | 3
2 |'impulse_name'     | Type[str]  |обязательный   | имя импульса состояние которого получаем                                                                 | Н
3 |'NO'               | Type[str]  |обязательный   | либо таблицы нет, либо импульса в таблице нет                                                            | NO

2.


table_id:impulse_state:state

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
1 |'table_id'         | Type[int]  |обязательный   | код станции                                                                                              | 3
2 |'impulse_name'     | Type[str]  |обязательный   | имя импульса состояние которого получаем                                                                 | Н
3 |'state'            | Type[str]  |обязательный   | 0-ошибка, 1-нет данных, 2-пассивный, 3-активный                                                          | 3


#### II. Отправить команду


test:[TCP_id=]/table_id/command_name[:command_type]

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
1 |'test'             | Type[str]  |обязательный   | маркер, строка для Tester                                                                                | test
2 |':'                | Type[str]  |обязательный   | разделитель между типом приложения и остальными параметрами                                              | :
3 |'TCP_id'=          | Type[str]  |необязательный | имя TCP клиента куда буддет отправлен запрос из данной строки                                            | ШНД=
4 |'/'                | Type[str]  |обязательный   | разделитель параметров                                                                                   | /
5 |'table_id'         | Type[int]  |обязательный   | код станции                                                                                              | 7600056
6 |'command_name'     | Type[str]  |обязательный   | имя команды импульса ТУ                                                                                  | Н
7 |:'command_type'    | Type[int]  |обязательный   | тип команды: 0-пассивная, 1-активная                                                                     | :0

из полученной директивы получаем сообщение для отправки клиенту 'TCP_id'


CMD:table_id:command_name:command_type

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
1 |'CMD'              | Type[str]  |обязательный   | маркер, запрос на выполнение команды                                                                     | CMD
2 |'table_id'         | Type[int]  |обязательный   | код станции                                                                                              | 7600056
3 |'command_name'     | Type[str]  |обязательный   | имя команды импульса ТУ                                                                                  | Н
4 |'command_type'     | Type[int]  |обязательный   | тип команды: 0-пассивная, 1-активная                                                                     | 0

Типы ответа на запрос типа CMD:


CMD:table_id:command_name:confirmation

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
1 |'CMD'              | Type[str]  |обязательный   | маркер, запрос на выполнение команды                                                                     | CMD
2 |'table_id'         | Type[int]  |обязательный   | код станции                                                                                              | 7600056
3 |'command_name'     | Type[str]  |обязательный   | имя команды импульса ТУ                                                                                  | Н
4 |'confirmation'     | Type[str]  |обязательный   | состояние отправки команды OK-отправлена, NO-неотправлена                                                | NO


#### III. Установить импульс


test:[TCP_id=]/table_id/@impulse_name[:impulse_type]

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
1 |'test'             | Type[str]  |обязательный   | маркер, строка для Tester                                                                                | test
2 |':'                | Type[str]  |обязательный   | разделитель между типом приложения и остальными параметрами                                              | :
3 |'TCP_id'=          | Type[str]  |необязательный | имя TCP клиента куда буддет отправлен запрос из данной строки                                            | ШНД=
4 |'/'                | Type[str]  |обязательный   | разделитель параметров                                                                                   | /
5 |'table_id'         | Type[int]  |обязательный   | код станции                                                                                              | 7600056
6 |'@'                | Type[str]  |обязательный   | маркер, того что отправляем команду на установку импульса ТС                                             | @
7 |'impulse_name'     | Type[str]  |обязательный   | имя импульса состояние которого устанавливаем                                                            | Н
8 |:'impulse_type'    | Type[int]  |обязательный   | тип состояния: 0-ошибка, 1-нет данных, 2-пассивный, 3-активный                                           | :0

из полученной директивы получаем сообщение для отправки клиенту 'TCP_id'


CMD:table_id:@impulse_name:impulse_type

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
1 |'CMD'              | Type[str]  |обязательный   | маркер, запрос на выполнение команды                                                                     | CMD
2 |'table_id'         | Type[int]  |обязательный   | код станции                                                                                              | 7600056
3 |'impulse_name'     | Type[str]  |обязательный   | имя импульса состояние которого устанавливаем                                                            | Н
4 |'impulse_type'     | Type[int]  |обязательный   | тип состояния: 0-ошибка, 1-нет данных, 2-пассивный, 3-активный                                           | 0

Типы ответа на запрос типа CMD:


CMD:table_id:impulse_type:confirmation

|poz|  Param name   |  Param type  |   Required   |  Description | Example |
|---| ------------- |------------- |------------- |------------- |-------- |
1 |'CMD'              | Type[str]  |обязательный   | маркер, запрос на выполнение команды                                                                     | CMD
2 |'table_id'         | Type[int]  |обязательный   | код станции                                                                                              | 7600056
3 |'impulse_name'     | Type[str]  |обязательный   | имя импульса состояние которого устанавливаем                                                            | Н
4 |'confirmation'     | Type[str]  |обязательный   | состояние установки импульса OK-установлен, NO-неустановлен в требуемое состояние                        | NO
