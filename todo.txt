
что нужно сделать?
с помощью созданного скрипта:
принимать в качестве параметра файл t1.txt ("mocha ./t1.js t1.txt --timeout 10000")
отправлять данные, записанные в файле t1_in.txt, преобразованные в нужную (формата  п.1 - п.5 ниже описано)
форму, принимать ответ, проверять его, записывать принятые данные в файл t1_out.txt, t1_log.txt

код t1.js , t1_(str).js - наброски. их необходимо доработать до рабочей формы

общие правила
  в файлах t1_in.txt, conv.txt могут быть комментарии. начинаются от символа # и идут до конца строки
  каждый из этих файлов обрабатывается построчно
  первое слово файла t1_in.txt каждой строчки приводится к нижнему регистру
  все слова каждой строчки файла conv.txt приводятся к нижнему регистру

файлы, необходимые для работы и формируемые скриптом t1.js:

 - t1_in.txt
   его заполняет человек
   входной файл данных состоит из строк формата: 
          либо (п.1) цифра                   
          либо (п.2) перевод строки
          либо (п.3) строка формата A:B:C:D 
          либо (п.4) строка формата A:B
          либо (п.5) строка формата A:B;С
    
    перед обработкой каждой строки
    вырезать все, что после #
    удалить все пробелы и символы табуляций до и после слов
    
    --------
    п.1  цифра 
    если в начале указана цифра, то безусловно ожидать указанное цифрой время (в секундах)
    пример:
    20  
    означает, что необходимо ожидать 20с
    --------
    п.2  пустая строка
    перейти к следующей строке, ничего не делать
    --------
    п.3 строка формата A:B:C:D 
    для строки такого формата, разбить строку на : и удалить все символы пробелов и табуляций до\после :
    Например
      св  : Н :Н1 Ч : 1 отправить в ncat в виде 6:Н:Н1 Ч:1
      св  : Н :Н2 Ч     отправить в ncat в виде 6:Н:Н1 Ч:0
    блокуч:Ч  :ЗАМ ПЕР  отправить в ncat в виде 5:Ч:ЗАМ ПЕР:0
    стр   :1  :1+   : 1 отправить в ncat в виде 1:1:1+:1
    
    A - тип объекта. Указано проектировщиком и следует заменить на число из файла conv.txt
        например св -> 6
         
        если названия объекта нет в файле conv_out.txt, писать в t1_log.txt
        [2021-12-12 12:12:12.000] файл t1_in.txt, строка 4, неверный или неописанный тип объекта св
        и завершить тест НЕ удачно
    
        А всегда приводить к нижнему регистру перед сравнением ключевого слова с ключем словаря, сформированного
         из файла conv.txt
    
    B - название объекта. Передается как есть
    C - название команды. Передается как есть. Может состоять из нескольких слов\букв. Слова или буквы разделены
     пробелом, его - пробел, удалять не надо
    :D - опционально, если есть хотя бы : , то это Ответственная команда и заменить при отправке на :1. 
     в остальных случаях (без :), то заменить на :0
    

   после посылки каждой команды п.3, ждать приема данных
   если ответ содержит NO (6:Н:Н2 Ч:NO) - записывать в t1_out.txt строку вида
      [15.12.2021, 14:15:52] Тест "Команда 1" НЕ пройден. Подробности в файле t1_log.txt
    и завершать выполнение скрипта
   если ответ OK - продолжить выполнение скрипта

    --------
    п.4 строка формата А:В
    для строки такого формата, разбить строку на : и удалить все символы пробелов и табуляций до\после :
    Например
      св  : Н  отправить в ncat в виде 6:Н
      св  : Н  отправить в ncat в виде 6:Н
    блокуч:Ч   отправить в ncat в виде 5:Ч
    стр   :1   отправить в ncat в виде 1:1
    

    A - тип объекта. Указано проектировщиком и следует заменить на число из файла conv.txt
        например св -> 6
         
        если названия объекта нет в файле conv_out.txt, писать в t1_log.txt
        [2021-12-12 12:12:12.000] файл t1_in.txt, строка 4, неверный или неописанный тип объекта св
        и завершить тест НЕ удачно
    
        А всегда приводить к нижнему регистру перед сравнением ключевого слова с ключем словаря, сформированного
         из файла conv.txt
    
    B - название объекта. Передается как есть

    ответ от ncat на запрос 6:Н
    6:Н1:0,65280,255:1,255:3,124/n1:3:0,23456:1,4354 ,
      содержит цвет примитивов у конкретного слоя объекта. 
      например: 0,65280,255  (0 - номер слоя, 65280 - цвет активной фазы мигания, 255 - цвет пассивной фазы мигания)
                1,255 (1- номер слоя, 255 - цвет примитива этого слоя)
    ответ и только цвет нулевого (0) слоя сравнить с данными входного файла t1_in.txt
      например строку вида
        св:Н преобразовать к виду 6:Н, используя conv.txt, отправить ее в ncat
         в ncat сформировать запись 6:Н:0,65280,255:1,2,0 , отправить ее назад
         разобрать и используя данные conv.txt преобразовать цвет 0 слоя 65280 в зеленый, сравнить
         со входной строкой


    или "6:Н1:NO", если такого объекта не существует, в этом случае писать в t1_log.txt
            [2021-12-12 12:12:12.000] файл t1_in.txt, строка 5, неверный или неописанный тип объекта св:Н (повторить строку из t1_in.txt)
            и завершить тест НЕ удачно, записав в файл t1_out.txt 
            [15.12.2021, 14:15:52] Тест "Команда 1" НЕ пройден. Подробности в файле t1_log.txt

 - conv.txt  
   его заполняет человек
   файл, необходимый для преобразования данных, найденных во входном файле данных в данные. которые уже
   необходимо отправить 
   и наоборот, данных, принятых из ncat, которые необходимо преобразовать назад и сравнить с данными в t1_in.txt

   файл нигде не задается, путь прописан в коде. Обработку этого файла вести в первую очередь
   
   все символы из первой колонки (перед :) привести к нижнему регистру, а потом заносить в словарь
   в случае повторных названий в первой колонке, писать в файл t1_log.txt 
     [15.12.2021, 14:17:33] повторение типа объекта св
    в файл t1_out.txt
     [15.12.2021, 14:15:52] Тест "Команда 1" НЕ пройден. Подробности в файле t1_log.txt
    
 - t1_log.txt
   его формирует скрипт
    выходной файл с протоколом отправки данных и приемом данных от ncat. сюда писать все отправленные данные,
    строки из файла t1_in.txt, прием данных от ncat

   [15.12.2021, 14:09:37] отправили: 6:Н  (св:Н)
     получили: 6:Н:0,65280,255:1,2,0 
   [15.12.2021, 14:15:35] отправили: 9:1  (выхман:1)
     получили: 9:1:NO
   [15.12.2021, 14:15:52] отправили: 9:2  (выхман:2)
     получили: 9:2:0,1234,0:0:1,1,1

 - t1_out.txt
   его формирует скрипт
   выходной файл успешности прохождения тестов.
   одна строка этого файла означает успешное прохождение всех записей файла t1_in.txt

   [15.12.2021, 14:15:35] Тест "Команда 1" пройден
   [15.12.2021, 14:15:52] Тест "Команда 2" НЕ пройден. Подробности в файле t2_log.txt
   [15.12.2021, 14:17:33] Тест "Команда 3" пройден
   [15.12.2021, 14:19:09] Тест "Команда 4" НЕ пройден. Подробности в файле t4_log.txt

--------------------
утилита ncat необходима лишь для визуализации данных, принятых от разрабатываемого скрипта и для проверки
обработки скриптом запросов файла t1_in.txt и строк из него форматов п.1 - п.5. Само собой, строки для 
скрипта необхдимо будет прописывать из утилиты ncat вручную (чтобы отправить назад на вход скрипта)
ncat -l 8888  будет слушать порт 8888, к такому варианту запуска и подключать свой скрипт

запускать ncat удобно из командной строки (консоли) пуск- cmd

открыть порт для прослушки программой ncat или любой другой программой, которая может открыть tcp
соединение для прослушивания (сервером), в котором можно видеть принятые текстовые данные и можно назад
отправлять данные. скачать ncat можно тут https://github.com/diegocr/netcat
программа эта нужна только для возможностей генерировать необходимую посленовательность данных- ответов
создаваемому скрипту

в скрипте используются пакет mocha и chai
